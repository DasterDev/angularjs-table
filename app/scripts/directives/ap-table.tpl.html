<table class="{{classes}}">
  <thead>
    <tr>
      <th 
        scope="col" 
        ng-repeat="column in columns" 
        ng-click="toggleSort($event,column)" 
        ng-class="{'sortable-column' : column.sort}" 
        ng-attr-title="{{ column.title || '' }}"
        ng-style="{ width: column.width, 'min-width': column.width, 'max-width': column.width }"
      >
        <span class="column-text">
          {{column.hasOwnProperty('label') ? column.label : column.id }}
          <span 
            ng-if="column.sort" 
            title="This column is sortable. Click to toggle sort order. Hold shift while clicking multiple columns to stack sorting."
            class="sorting-icon {{ getSortClass( sortDirection[column.id] ) }}"
          ></span>
        </span>
        <span 
          ng-if="!column.lock_width"
          class="column-resizer" 
          title="Click and drag to set discreet width. Click once to clear discreet width."
          ng-mousedown="startColumnResize($event, column)"
        >
          &nbsp;
        </span>
      </th>
    </tr>
    <tr ng-if="hasFilterFields()">
      <th ng-repeat="column in columns">
        <input type="search" ng-if="(column.filter)" ng-model="searchTerms[column.id]">
      </th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="row in rows | tableRowFilter:columns:searchTerms | tableRowSorter:columns:sortOrder:sortDirection ">
      <td ng-repeat="column in columns" >
        {{ row | tableCellFilter:column }}
      </td>
    </tr>
  </tbody>
</table>